This state machine was created by Mina Pêcheux, I just simplified and save it for future use.
Mina Pêcheux youtube - https://www.youtube.com/@minapecheux 
Mina Pêcheux github - https://github.com/MinaPecheux/godot-tutorials
